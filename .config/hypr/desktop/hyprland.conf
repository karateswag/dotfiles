# Author: karateSwag
# Repo: https://github.com/karateswag/dotfiles

# hyprland desktop config

### EnvVars ####################################################################
#env = QT_QPA_PLATFORMTHEME, qt5ct
env = QT_QPA_PLATFORMTHEME, qt6ct


### Exec #######################################################################
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec-once = wlsunset -t 5000 -S 9:00 -s 21:00
exec-once = ~/.config/hypr/scripts/desktop-portal
exec-once = ~/.config/hypr/scripts/import-gsettings
exec-once = hyprctl setcursor "Capitaine Cursor - White" 24
# exec = swaybg -m fill -i /usr/share/backgrounds/archlinux/awesome.png
exec = swww init
exec-once = waybar
exec-once = nm-applet
exec-once = deluge-gtk
# exec-once = swayidle -w timeout 300 'swaylock' timeout 310 'hyprctl dispatch dpms off' resume 'hyprctl dispatch dpms on' before-sleep 'swaylock'
exec-once = swayidle -w timeout 300 'swaylock' timeout 310 'hyprctl dispatch dpms off' resume 'hyprctl dispatch dpms on'

### Monitors ###################################################################
monitor=DP-2,3840x2160@144,0x0,1.33,bitdepth,10
monitor=DP-1,2560x1440@144,2887x0,1
# workspace=DP-2,1
# workspace=DP-1,2

### Inputs #####################################################################
input {
    kb_layout = fr
    numlock_by_default = true
    kb_variant = azerty
    kb_model =
    kb_options =
    kb_rules =
    follow_mouse = 1
    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.
  }

### General ####################################################################
general {
    gaps_in = 3
    gaps_out = 6
    border_size = 1
    col.active_border = rgba(ff7edbff)
    col.inactive_border = rgba(262335ff)
    no_border_on_floating = false
    layout = master
    # layout = dwindle
}

### Misc #######################################################################
misc {
  disable_hyprland_logo = true
  disable_splash_rendering = true
  vfr = true
  vrr = 2
  mouse_move_enables_dpms = true
  key_press_enables_dpms = true
  enable_swallow = true
  swallow_regex = ^(alacritty)$
}

### Xwayland ###################################################################
xwayland {
    # use_nearest_neighbor = true
    # force_zero_scaling = true
}

### Decoration #################################################################
decoration {
  rounding = 5
  multisample_edges = true

  active_opacity = 1.0
  inactive_opacity = 1.0
  fullscreen_opacity = 1.0

  blur = false
  blur_size = 3
  blur_passes = 3
  blur_new_optimizations = on

  drop_shadow = false
  shadow_ignore_window = true
  shadow_offset = 1 2
  shadow_range = 10
  shadow_render_power = 2
  col.shadow = 0x66404040

  #blurls = gtk-layer-shell
  # blurls = waybar
  blurls = lockscreen
  blurls = swaylock
}

### Animations #################################################################
animations {
  enabled = yes

  # bezier = overshot, 0.05, 0.9, 0.1, 1.05
  # bezier = smoothOut, 0.36, 0, 0.66, -0.56
  # bezier = smoothIn, 0.25, 1, 0.5, 1

  # animation = windows, 1, 5, overshot, slide
  # animation = windowsOut, 1, 4, smoothOut, slide
  # animation = windowsMove, 1, 4, default
  # animation = border, 1, 10, default
  # animation = fade, 1, 10, smoothIn
  # animation = fadeDim, 1, 10, smoothIn
  # animation = workspaces, 1, 6, default

  bezier = myBezier, 0.05, 0.9, 0.1, 1.05
  animation = windows, 1, 7, myBezier
  animation = windowsOut, 1, 7, default, popin 80%
  animation = border, 1, 10, default
  animation = fade, 1, 7, default
  animation = workspaces, 1, 6, default
}

### Layout #####################################################################
dwindle {
    no_gaps_when_only = false
    pseudotile = true # master switch for pseudotiling. Enabling is bound to mainMod + P in the keybinds section below
    preserve_split = yes # you probably want this
    # special_scale_factor = 0.8
}

master {
    # no_gaps_when_only = true
    new_is_master = false
    special_scale_factor = 0.8
    # orientation = center
    mfact = 0.5
}

### Workspace Rules ############################################################
workspace=1,monitor:DP-2
workspace=2,monitor:DP-1
workspace=3,monitor:DP-1
workspace=4,monitor:DP-2
workspace=5,monitor:DP-1
workspace=6,monitor:DP-2
workspace=7,monitor:DP-1
workspace=8,monitor:DP-2
workspace=9,monitor:DP-1
workspace=10,monitor:DP-1

### Window Rules ###############################################################
windowrule = float, file_progress
windowrule = float, confirm
windowrule = float, dialog
windowrule = float, download
windowrule = float, notification
windowrule = float, error
windowrule = float, splash
windowrule = float, confirmreset
windowrule = float, title:Open File
windowrule = float, title:branchdialog
windowrule = float, Lxappearance
windowrule = float, Rofi
windowrule = animation none,Rofi
windowrule = float, viewnior
windowrule = float, Viewnior
windowrule = float, feh
windowrule = float, pavucontrol-qt
windowrule = float, pavucontrol
windowrule = float, file-roller
windowrule = float, title:DevTools
windowrule = fullscreen, wlogout
windowrule = float, title:wlogout
windowrule = fullscreen, title:wlogout
windowrule = idleinhibit focus, mpv
windowrule = idleinhibit fullscreen, firefox
windowrule = float, title:^(Media viewer)$
windowrule = float, galculator
windowrule = float, title:^(Picture-in-Picture)$
# windowrule = move 75 44%, title:^(Volume Control)$
# windowrule = opacity 0.80, title:^(tofi)$
windowrule = workspace 9, Steam
windowrule = workspace 9, lutris
windowrule = fullscreen, gamescope
windowrule = workspace 8, gamescope
windowrule = workspace 8, title:^(Overwatch)$
windowrule = workspace 9, title:^(Battle.net)$
windowrule = tile, title:^(Battle.net)$

### Floating Window Rules
# Pulseaudio Volume Control
windowrulev2 = float, title:^(Volume Control)$
windowrulev2 = size 1200 900, title:^(Volume Control)$
windowrulev2 = opacity 0.9 0.8, title:^(Volume Control)$
# Network Manager Connection Editor
windowrulev2 = float, class:^(nm-connection-editor)$
windowrulev2 = size 1200 900, class:^(nm-connection-editor)$
$windowrulev2 = opacity 0.9 0.8, class:^(nm-connection-editor)$

### Workspace 2
windowrulev2 = workspace 2, title:Firefox

### Workspace 4
windowrule = workspace 4, Gimp
windowrulev2 = workspace 4, title:Kdenlive

### Workspace 10
windowrulev2 = opacity 0.9 0.8, class:^(deluge)$
windowrulev2 = workspace 10, title:Deluge
windowrulev2 = opacity 0.9 0.8, class:^(thunar)$
windowrulev2 = workspace 10, title:Thunar


### Keybindings ################################################################
$mainMod = SUPER
$myTerm = alacritty
$myFileManager = thunar

### Misc
bind = $mainMod, A, killactive, 
bind = $mainMod SHIFT, A, killactive, 
bind = $mainMod SHIFT, R, exec, hyprctl reload
bind = $mainMod SHIFT, Q, exit, 
bind = $mainMod, V, togglefloating, 
# bind = $mainMod, P, pseudo, # dwindle
# bind = $mainMod, J, togglesplit, # dwindle

### App Launch
bind = $mainMod, RETURN, exec, $myTerm
bind = $mainMod SHIFT, RETURN, exec, $myFileManager
bind = $mainMod, D, exec, tofi-drun --drun-launch=true
bind = SUPER, escape, exec, wlogout --protocol layer-shell -b 5 -T 400 -B 400
# bind = CTRL ALT, L, exec, swaylock
bind = CTRL ALT, F, exec, firefox
bind = CTRL ALT, G, exec, gimp
bind = CTRL ALT, H, exec, $myTerm -T htop -e htop
bind = CTRL ALT, N, exec, $myTerm -T nvtop -e nvtop

### Media Keys
binde =, XF86AudioRaiseVolume, exec, pamixer -i 5
binde =, XF86AudioLowerVolume, exec, pamixer -d 5
bind =, XF86AudioMute, exec, pamixer -t

### Full Screen
bind = $mainMod, F, fullscreen, 0

### Focus Monitor
bind = $mainMod, SPACE, focusmonitor, +1
bind = $mainMod SHIFT, SPACE, movewindow, mon:+1
bind = $mainMod CTRL, SPACE, swapactiveworkspaces, current +1

### Focus Window
bind = $mainMod, H, movefocus, l
bind = $mainMod, L, movefocus, r
bind = $mainMod, K, movefocus, u
bind = $mainMod, J, movefocus, d
bind = $mainMod, LEFT, movefocus, l
bind = $mainMod, RIGHT, movefocus, r
bind = $mainMod, UP, movefocus, u
bind = $mainMod, DOWN, movefocus, d

### Move Window
bind = $mainMod SHIFT, H, movewindow, l
bind = $mainMod SHIFT, L, movewindow, r
bind = $mainMod SHIFT, K, movewindow, u
bind = $mainMod SHIFT, J, movewindow, d
bind = $mainMod SHIFT, left, movewindow, l
bind = $mainMod SHIFT, right, movewindow, r
bind = $mainMod SHIFT, up, movewindow, u
bind = $mainMod SHIFT, down, movewindow, d

### Tabbed
bind = $mainMod, T, togglegroup
bind = $mainMod SHIFT, T,  lockgroups, toggle
bind = $mainMod, TAB, changegroupactive, f
bind = $mainMod SHIFT, TAB, changegroupactive, b

### Special Workspace
# bind = $mainMod, O, togglespecialworkspace
# bind = $mainMod SHIFT, O, movetoworkspace, special

### Switch Workspace
bind = $mainMod, Ampersand, workspace, 1
bind = $mainMod, Eacute, workspace, 2
bind = $mainMod, Quotedbl, workspace, 3
bind = $mainMod, Apostrophe, workspace, 4
bind = $mainMod, Parenleft, workspace, 5
bind = $mainMod, Minus, workspace, 6
bind = $mainMod, Egrave, workspace, 7
bind = $mainMod, Underscore, workspace, 8
bind = $mainMod, ccedilla, workspace, 9
bind = $mainMod, agrave, workspace, 10

# bind = $mainMod, Ampersand, workspace, name:1:code
# bind = $mainMod, Eacute, workspace, name:2:web
# bind = $mainMod, Quotedbl, workspace, name:3:mail
# bind = $mainMod, Apostrophe, workspace, name:4:project

bind = $mainMod CONTROL, RIGHT, workspace, e+1
bind = $mainMod CONTROL, LEFT, workspace, e-1


### Move focus windows to workspace
bind = $mainMod SHIFT, Ampersand, movetoworkspace, 1
bind = $mainMod SHIFT, Eacute, movetoworkspace, 2
bind = $mainMod SHIFT, Quotedbl, movetoworkspace, 3
bind = $mainMod SHIFT, Apostrophe, movetoworkspace, 4
bind = $mainMod SHIFT, Parenleft, movetoworkspace, 5
bind = $mainMod SHIFT, Minus, movetoworkspace, 6
bind = $mainMod SHIFT, Egrave, movetoworkspace, 7
bind = $mainMod SHIFT, Underscore, movetoworkspace, 8
bind = $mainMod SHIFT, ccedilla, movetoworkspace, 9
bind = $mainMod SHIFT, agrave, movetoworkspace, 10

# Scroll through existing workspaces with mainMod + scroll
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow
